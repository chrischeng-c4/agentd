description = "Generate tasks.md using create_tasks MCP tool"

prompt = """
## Task: Create tasks.md

Use the `create_tasks` MCP tool to generate tasks.md for this change.

## Instructions

1. **Read context**:
   - Read proposal.md for overall scope
   - Read all specs/*.md for detailed requirements

2. **Break down into tasks**:
   - Organize by layer (build order):
     - **data**: Database schemas, models, data structures
     - **logic**: Business logic, algorithms, core functionality
     - **integration**: API endpoints, CLI commands, external integrations
     - **testing**: Unit tests, integration tests
   - Each task should reference a spec requirement (e.g., `spec-id:R1`)
   - Define file actions: CREATE, MODIFY, or DELETE
   - Set dependencies between tasks

3. **Use create_tasks MCP tool**:

```json
{
  "change_id": "<change-id>",
  "tasks": [
    {
      "layer": "data",
      "number": 1,
      "title": "Create User model",
      "file": {
        "path": "src/models/user.rs",
        "action": "CREATE"
      },
      "spec_ref": "user-model:R1",
      "description": "Detailed task description",
      "depends": []
    },
    {
      "layer": "logic",
      "number": 1,
      "title": "Implement authentication",
      "file": {
        "path": "src/auth/mod.rs",
        "action": "CREATE"
      },
      "spec_ref": "auth-flow:R1",
      "description": "Detailed task description",
      "depends": ["1.1"]
    }
  ]
}
```

## Output

After using the MCP tool, output:
```
## Tasks Created: <change-id>
- Total tasks: N
- Layers: data(X), logic(Y), integration(Z), testing(W)
```

CRITICAL:
- You MUST use `create_tasks` MCP tool
- Do NOT use write_file
- Do NOT write files directly
- The MCP tool generates proper YAML frontmatter automatically
"""
